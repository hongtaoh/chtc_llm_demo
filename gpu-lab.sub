# gpu-lab.sub
# CHTC GPU Lab job with newer PyTorch container

universe = vanilla

log    = log/job_$(Cluster)_$(Process).log
output = log/job_$(Cluster)_$(Process).out
error  = log/job_$(Cluster)_$(Process).err

executable = run_gpu_job.sh

should_transfer_files = YES
when_to_transfer_output = ON_EXIT
transfer_input_files = infer.py, prompts.txt, run_gpu_job.sh
transfer_output_files = responses

+WantGPULab = true
+GPUJobLength = "short"

request_gpus   = 1
request_cpus   = 2
request_memory = 8GB
request_disk   = 15GB

environment = "PYTHONUNBUFFERED=1"

queue 1